<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Transfer Management System - Boxtel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 10px; text-align: center;">
            <div class="spinner"></div>
            <p style="margin-top: 15px; color: #666;">Laden...</p>
        </div>
    </div>

    <!-- Language Toggle -->
    <div class="language-toggle">
        <button class="lang-btn active" onclick="switchLanguage('nl')">NL</button>
        <button class="lang-btn" onclick="switchLanguage('en')">EN</button>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <span>üè≠</span>
                <span>Machine Transfer Management - Boxtel</span>
            </h1>
            <div class="header-info">
                <div class="deadline">
                    üìÖ Controle deadline: 31.12.2025
                </div>
                <div class="deadline critical">
                    ‚ö†Ô∏è Finale deadline: 31.03.2026
                </div>
                <div class="user-info">
                    üë§ <span id="current-user">Loading...</span> (<span id="user-role">-</span>)
                </div>
                <button class="btn btn-secondary" onclick="logout()" style="padding: 8px 15px;">
                    üö™ Uitloggen
                </button>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('dashboard')">
                üìä Dashboard
            </button>
            <button class="nav-tab" onclick="switchTab('machines')">
                üîß Machines
            </button>
            <button class="nav-tab" onclick="switchTab('planning')">
                üìÖ Planning
            </button>
            <button class="nav-tab" onclick="switchTab('technical')">
                ‚öôÔ∏è Technisch
            </button>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <button class="btn btn-primary" onclick="openModal('machine')">
                ‚ûï Machine toevoegen
            </button>
            <div class="search-box">
                <input type="text" placeholder="üîç Zoek machine, nummer, lijn..." id="search-input">
            </div>
            <div class="filter-group">
                <label>Status:</label>
                <select id="status-filter">
                    <option value="all">Alle</option>
                    <option value="In productie">In productie</option>
                    <option value="Gereed voor transport">Gereed transport</option>
                    <option value="Gereed voor demontage">Demontage</option>
                    <option value="Wacht op Roy">Wacht op Roy</option>
                    <option value="Done">Done</option>
                    <option value="PPAP vereist">PPAP</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Locatie:</label>
                <select id="location-filter">
                    <option value="all">Alle</option>
                    <option value="CZ">CZ (Tsjechi√´)</option>
                    <option value="Mex">Mex (Mexico)</option>
                    <option value="Verschrot">Verschrot</option>
                    <option value="Daremon">Daremon</option>
                    <option value="Hans">Hans</option>
                </select>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>TOTAAL MACHINES</h3>
                        <div class="stat-value" id="stat-total">0</div>
                        <div class="stat-label">Spuitgiet + Equipment</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #1976d2;">
                        <h3>NAAR CZ</h3>
                        <div class="stat-value" style="color: #1976d2;" id="stat-cz">0</div>
                        <div class="stat-label">Machines</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #e65100;">
                        <h3>NAAR MEXICO</h3>
                        <div class="stat-value" style="color: #e65100;" id="stat-mex">0</div>
                        <div class="stat-label">Machines</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #f44336;">
                        <h3>VERSCHROT</h3>
                        <div class="stat-value" style="color: #f44336;" id="stat-scrap">0</div>
                        <div class="stat-label">Machines</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #4CAF50;">
                        <h3>DONE</h3>
                        <div class="stat-value" style="color: #4CAF50;" id="stat-done">0</div>
                        <div class="stat-label">Transport compleet</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #FF9800;">
                        <h3>WACHTEND</h3>
                        <div class="stat-value" style="color: #FF9800;" id="stat-waiting">0</div>
                        <div class="stat-label">Op beslissing</div>
                    </div>
                </div>

                <!-- Recent Machines Table -->
                <h3 style="margin: 20px 0 15px; color: #333;">Recente updates</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Machine</th>
                                <th>Nr.</th>
                                <th>Status</th>
                                <th>Bestemming</th>
                                <th>Lijn</th>
                                <th>Verantwoordelijk</th>
                                <th>Opmerkingen</th>
                                <th>Acties</th>
                            </tr>
                        </thead>
                        <tbody id="machines-tbody">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 40px;">
                                    Laden...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Machines View -->
            <div id="machines" class="view" style="display: none;">
                <h3 style="margin-bottom: 20px; color: #333;">Alle Machines</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Machine</th>
                                <th>Nr.</th>
                                <th>Status</th>
                                <th>Bestemming</th>
                                <th>Lijn</th>
                                <th>Verantwoordelijk</th>
                                <th>Opmerkingen</th>
                                <th>Acties</th>
                            </tr>
                        </thead>
                        <tbody id="machines-tbody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Planning View (Gantt) -->
            <div id="planning" class="view" style="display: none;">
                <h3 style="margin-bottom: 20px; color: #333;">Planning Overview (Gantt Chart)</h3>

                <div class="gantt-container">
                    <div class="gantt-sidebar">
                        <div class="gantt-header-left">
                            <div class="gantt-col" style="flex: 2">Machine</div>
                            <div class="gantt-col">Status</div>
                            <div class="gantt-col">Verantwoordelijk</div>
                        </div>
                        <div id="gantt-rows">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <div class="gantt-timeline">
                        <div class="gantt-header">
                            <div class="gantt-months">
                                <div class="gantt-month" style="width: 300px;">Q4 2024</div>
                                <div class="gantt-month" style="width: 400px;">Q1 2025</div>
                                <div class="gantt-month" style="width: 400px;">Q2 2025</div>
                            </div>
                        </div>
                        <div id="gantt-bars">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical View -->
            <div id="technical" class="view" style="display: none;">
                <h3 style="margin-bottom: 20px; color: #333;">Technische Checklist</h3>

                <div class="tech-grid">
                    <div class="tech-card">
                        <h4>‚ö° Elektrisch</h4>
                        <ul class="checklist">
                            <li><input type="checkbox"> Hoofdschakelaar uitgeschakeld</li>
                            <li><input type="checkbox"> Kabels gelabeld</li>
                            <li><input type="checkbox"> Stroomvoorziening gedocumenteerd</li>
                            <li><input type="checkbox"> Aarding gecontroleerd</li>
                            <li><input type="checkbox"> Noodstop getest</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>üíß Hydrauliek/Pneumatiek</h4>
                        <ul class="checklist">
                            <li><input type="checkbox"> Olie afgetapt</li>
                            <li><input type="checkbox"> Leidingen ontlucht</li>
                            <li><input type="checkbox"> Filters vervangen</li>
                            <li><input type="checkbox"> Druk afgelaten</li>
                            <li><input type="checkbox"> Aansluitingen gedocumenteerd</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>üîß Mechanisch</h4>
                        <ul class="checklist">
                            <li><input type="checkbox"> Bewegende delen geblokkeerd</li>
                            <li><input type="checkbox"> Smeerpunten gemarkeerd</li>
                            <li><input type="checkbox"> Bevestigingspunten ge√Ønspecteerd</li>
                            <li><input type="checkbox"> Transport beveiliging aangebracht</li>
                            <li><input type="checkbox"> Gewicht geverifieerd</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>üìã Documentatie</h4>
                        <ul class="checklist">
                            <li><input type="checkbox"> Technische tekeningen</li>
                            <li><input type="checkbox"> CE certificering</li>
                            <li><input type="checkbox"> Onderhoudshistorie</li>
                            <li><input type="checkbox"> Software backups</li>
                            <li><input type="checkbox"> Handleidingen</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Machine Modal -->
    <div class="modal" id="machineModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <span>üîß</span>
                    <span>Machine Toevoegen/Bewerken</span>
                </h2>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="machineForm">
                    <input type="hidden" id="machine-id">

                    <!-- Form Tabs -->
                    <div class="form-tabs">
                        <button type="button" class="form-tab active" onclick="switchFormTab('basic')">
                            Basis Info
                        </button>
                        <button type="button" class="form-tab" onclick="switchFormTab('technical')">
                            Technisch
                        </button>
                        <button type="button" class="form-tab" onclick="switchFormTab('planning')">
                            Planning
                        </button>
                    </div>

                    <!-- Basic Info Section -->
                    <div class="form-section active" id="basic-section">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Machine Type*</label>
                                <select id="machine-type" required>
                                    <option>Spuitgietmachine</option>
                                    <option>Spuitgietmachine 2K</option>
                                    <option>Duif</option>
                                    <option>Koot</option>
                                    <option>Bergstein</option>
                                    <option>Amori</option>
                                    <option>Tantec</option>
                                    <option>Deckel</option>
                                    <option>Jung400/afkort machine</option>
                                    <option>Erowasysteem</option>
                                    <option>Hydraulic press</option>
                                    <option>Anders</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Machine Nummer</label>
                                <input type="text" id="machine-number" placeholder="Bijv. 23, 44, etc.">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Status*</label>
                                <select id="machine-status" required>
                                    <option>In productie</option>
                                    <option>Gereed voor transport</option>
                                    <option>Gereed voor demontage</option>
                                    <option>Wacht op Roy</option>
                                    <option>Done</option>
                                    <option>PPAP vereist</option>
                                    <option>Verschrot</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bestemming*</label>
                                <select id="machine-destination" required>
                                    <option>CZ (Tsjechi√´)</option>
                                    <option>Mex (Mexico)</option>
                                    <option>Verschrot</option>
                                    <option>Daremon</option>
                                    <option>Hans (gebouw)</option>
                                    <option>Boerboom</option>
                                    <option>Niet toegewezen</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Productielijn</label>
                                <select id="machine-line">
                                    <option>Lijn 1</option>
                                    <option>Lijn 2</option>
                                    <option>Lijn 3</option>
                                    <option>Cleanroom</option>
                                    <option>Stamping</option>
                                    <option>Assembly</option>
                                    <option>Geen</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Verantwoordelijke*</label>
                                <select id="machine-responsible" required>
                                    <option>Roy</option>
                                    <option>Jiri</option>
                                    <option>Hans</option>
                                    <option>Remon</option>
                                    <option>Patrick</option>
                                    <option>Jon</option>
                                    <option>Wil</option>
                                    <option>Berry</option>
                                    <option>Mark</option>
                                    <option>Adrian</option>
                                    <option>Jeffrey</option>
                                    <option>John L.</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Opmerkingen</label>
                            <textarea id="machine-notes" placeholder="Bijv. PPAP vereist, Wacht op goedkeuring..."></textarea>
                        </div>
                    </div>

                    <!-- Technical Section -->
                    <div class="form-section" id="technical-section">
                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Gewicht (kg)</label>
                                <input type="number" id="machine-weight" placeholder="2500">
                            </div>
                            <div class="form-group">
                                <label>Afmetingen (LxBxH m)</label>
                                <input type="text" id="machine-dimensions" placeholder="3.0 x 2.5 x 2.0">
                            </div>
                            <div class="form-group">
                                <label>Vermogen (kW)</label>
                                <input type="number" id="machine-power" placeholder="75">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Spanning</label>
                                <select id="machine-voltage">
                                    <option>400V 3-fase</option>
                                    <option>230V 1-fase</option>
                                    <option>480V 3-fase</option>
                                    <option>Anders</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Olie type</label>
                                <input type="text" id="machine-oil" placeholder="Hydraulische olie type">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Speciale vereisten</label>
                            <textarea id="machine-requirements" placeholder="Cleanroom compatibel, Speciale hijspunten..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Gevaarlijke stoffen</label>
                            <textarea id="machine-hazmat" placeholder="Lijst van gevaarlijke stoffen..."></textarea>
                        </div>
                    </div>

                    <!-- Planning Section -->
                    <div class="form-section" id="planning-section">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Demontage datum</label>
                                <input type="date" id="dismantling-date">
                            </div>
                            <div class="form-group">
                                <label>Transport datum</label>
                                <input type="date" id="transport-date">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Installatie datum</label>
                                <input type="date" id="installation-date">
                            </div>
                            <div class="form-group">
                                <label>PPAP datum</label>
                                <input type="date" id="ppap-date">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Transport bedrijf</label>
                            <select id="transport-company">
                                <option>Niet toegewezen</option>
                                <option>Boerboom Transport</option>
                                <option>Van der Vlist</option>
                                <option>Mammoet</option>
                                <option>Anders</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Planning opmerkingen</label>
                            <textarea id="planning-notes" placeholder="Speciale planning vereisten..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>CE Certificaat nummer</label>
                            <input type="text" id="ce-certificate" placeholder="CE-2025-XXXX">
                        </div>

                        <div class="form-group">
                            <label>Link naar handleiding</label>
                            <input type="url" id="manual-link" placeholder="https://...">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">
                        Annuleren
                    </button>
                    <button type="button" class="btn btn-primary" onclick="saveMachine()">
                        Opslaan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notification-icon">‚úì</span>
        <span id="notification-text">Wijzigingen opgeslagen!</span>
    </div>

    <!-- Scripts -->
    <script src="public/config.js"></script>
    <script src="public/api.js"></script>
    <script src="app.js"></script>
</body>
</html>
